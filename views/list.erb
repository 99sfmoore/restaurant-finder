
<h2><%= @list_generator.name %></h2>
<% if @list_generator.is_a?(Neighborhood) %>
  Do you want to see restaurants in the entire <a href="/area/<%= @list_generator.area_id %>"><%= @list_generator.area.name %>?</a>
<% end %>
<% if @list_generator.is_a?(Source) %>
  <h4><%= @list_generator.description %><h4>
<% end %>
<% if @user.editable_lists.include?(@list_generator) %>
  <a href="/edit-list/<%=@list_generator.id%>">Edit this list</a>
  <br>
<% end %>
<% if @user.owned_lists.include?(@list_generator) %>
  <a href="/share-list/<%=@list_generator.id%>">Share this list</a>
<% end %>
  <table id="list_table" class="tablesorter">
    <thead>
    <tr>
      <% @headers.each do |head| %>
        <th><%= head %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @list_generator.restaurants.each do |rest| %>
    <tr>
      <td><a href = '/rest_page/<%= rest.slug %>'><%=rest.name %></a></td>
      <td>
        <% rest.cuisines.uniq.each do |cuisine| %>
          <a href = '/list_by/cuisine/<%= cuisine.slug%>'><%= cuisine.name %>
          <br>
        <% end %>
      </td>
      <% if @headers.include?("Neighborhood") %>
        <td><%if rest.neighborhood %>
          <a href = '/list_by/neighborhood/<%= rest.neighborhood.id %>'><%= rest.neighborhood.name %>
            <%end%></td>
      <% end %>
      <td>
        <% rest.sources.each do |source| %>
          <% if (source.public? || @user.sources.include?(source)) && source != @list_generator  %>
            <a href = '/list_by/source/<%=source.slug%>'><%=source.name %></a><br>
          <% end %>
        <% end %>
      </td>
      <td><%= rest.notes %></td>  
    <% end %>
  </tbody>
  </table>

<script>
  $(function(){
  $("#list_table").tablesorter();
  });
</script>